<div class="container mt-4">
  <h3>Student List</h3>

  <form #studentForm="ngForm" (ngSubmit)="submitSelected()" novalidate>

    <!-- Filter Input -->
    <input type="text"
           [(ngModel)]="filterClass"
           name="filterClass"
           (input)="applyFilter()"
           placeholder="Filter by Class"
           class="form-control mb-3" />

    <!-- Student Table -->
    <table class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr>
          <th><input type="checkbox" class="form-check-input" disabled /></th>
          <th>Name</th>
          <th>Class</th>
          <th>Roll No</th>
          <th>Phone</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let s of filteredStudents">
          <td>
            <input type="checkbox"
                   class="form-check-input"
                   [(ngModel)]="s.selected"
                   name="selected_{{s.rollNo}}" />
          </td>
          <td>{{ s.name }}</td>
          <td>{{ s.class }}</td>
          <td>{{ s.rollNo }}</td>
          <td>{{ s.phone }}</td>
        </tr>
      </tbody>
    </table>

    <!-- Validation Message -->
    <div *ngIf="submitAttempted && !hasSelectedStudent()" class="text-danger mb-2">
      <p class="text-danger mb-2">Please select at least one student.</p>
    </div>

    <!-- Textarea -->
    <div class="mb-3">
      <label for="remarks" class="form-label">Remarks <span class="text-danger">*</span></label>
      <textarea id="remarks"
                name="remarks"
                [(ngModel)]="remarks"
                #remarksInput="ngModel"
                class="form-control"
                rows="3"
                placeholder="Write remarks here..."
                required></textarea>

      <div *ngIf="submitAttempted && remarksInput.invalid" class="text-danger mt-1">
        Remarks are required.
      </div>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary">Submit Selected</button>

  </form>
</div>
